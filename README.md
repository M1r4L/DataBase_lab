# Лабораторная работа 1

## Подписка. (вариант 15)
Имеются подписчики (ФИО, адрес) и издания (индекс, название, месячная стоимость). Подписчик может подписаться на несколько изданий, причем на каждое на определенное число месяцев.

**Выходные документы:**
- Выдать список подписчиков указанного издания, упорядоченный по фамилиям.
- Выдать список подписчиков и их изданий с подсчетом суммы подписки каждого подписчика, упорядоченный по фамилиям.

**Er-Диаграмма**

![](Er-Диаграмма.jpg)

**Логическая модель**

*Подписчик:*
  - Подписчик_id (Первичный ключ - PK)
  - Фамилия, Имя, Отчество
  - Дата рождения, Телефон
  - Адрес_id (Внешний ключ - FK к сущности "Адрес")
    
*Адрес:*
  - Адрес_id (PK)
  - Индекс, Город, Улица, Дом, Квартира
    
*Издание:*
  - Издание_id (PK)
  - Название
  - Категория
  - Месячная_стоимость
  - Год_основания
    
*Подписка (связующая таблица):*
  - Подписка_id (PK)
  - Подписчик_id (FK)
  - Издание_id (FK)
  - Количество_месяцев
  - Дата_оформления
  - Период_доставки

*Взаимосвязи*
  1. "Подписчик" и "Адрес": Связь один-ко-многим (один адрес может быть связан с несколькими подписчиками).
  2. "Подписчик" и "Подписка": Связь один-ко-многим (один подписчик может иметь много записей о подписке).
  3. "Издание" и "Подписка": Связь один-ко-многим (одно издание может фигурировать во многих записях о подписке).

**Физическая модель**
```sql
-- Создание таблицы Адрес
CREATE TABLE Адрес (
    Адрес_id INT PRIMARY KEY,
    Индекс VARCHAR(10),
    Город VARCHAR(100),
    Улица VARCHAR(100),
    Дом VARCHAR(20),
    Квартира VARCHAR(20)
);

-- Создание таблицы Подписчик
CREATE TABLE Подписчик (
    Подписчик_id INT PRIMARY KEY,
    Фамилия VARCHAR(100) NOT NULL,
    Имя VARCHAR(100) NOT NULL,
    Отчество VARCHAR(100),
    Дата_рождения DATE,
    Телефон VARCHAR(20),
    Адрес_id INT,
    FOREIGN KEY (Адрес_id) REFERENCES Адрес(Адрес_id)
);

-- Создание таблицы Издание
CREATE TABLE Издание (
    Издание_id INT PRIMARY KEY,
    Название VARCHAR(255) NOT NULL,
    Категория VARCHAR(100),
    Месячная_стоимость DECIMAL(10, 2) NOT NULL,
    Год_основания INT
);

-- Создание таблицы Подписка (для реализации связи многие-ко-многим между Подписчиком и Изданием)
CREATE TABLE Подписка (
    Подписка_id INT PRIMARY KEY,
    Подписчик_id INT NOT NULL,
    Издание_id INT NOT NULL,
    Количество_месяцев INT NOT NULL,
    Дата_оформления DATE NOT NULL,
    Период_доставки VARCHAR(50),
    FOREIGN KEY (Подписчик_id) REFERENCES Подписчик(Подписчик_id),
    FOREIGN KEY (Издание_id) REFERENCES Издание(Издание_id)
);
